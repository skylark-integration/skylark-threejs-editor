{"version":3,"sources":["commands/RemoveObjectCommand.js"],"names":["define","Command","THREE","RemoveObjectCommand","editor","object","call","this","type","name","parent","undefined","index","children","indexOf","prototype","execute","removeObject","deselect","undo","addObject","select","toJSON","output","parentUuid","uuid","fromJSON","json","objectByUuid","scene","loader","ObjectLoader","parse"],"mappings":";;;;;;;AAAAA,QACI,aACA,sBACD,SAAUC,EAASC,GAClB,aACA,IAAIC,EAAsB,SAAUC,EAAQC,GACxCJ,EAAQK,KAAKC,KAAMH,GACnBG,KAAKC,KAAO,sBACZD,KAAKE,KAAO,gBACZF,KAAKF,OAASA,EACdE,KAAKG,YAAoBC,IAAXN,EAAuBA,EAAOK,YAASC,OACjCA,IAAhBJ,KAAKG,SACLH,KAAKK,MAAQL,KAAKG,OAAOG,SAASC,QAAQP,KAAKF,UAiCvD,OA9BAF,EAAoBY,WAChBC,QAAS,WACLT,KAAKH,OAAOa,aAAaV,KAAKF,QAC9BE,KAAKH,OAAOc,YAEhBC,KAAM,WACFZ,KAAKH,OAAOgB,UAAUb,KAAKF,OAAQE,KAAKG,OAAQH,KAAKK,OACrDL,KAAKH,OAAOiB,OAAOd,KAAKF,SAE5BiB,OAAQ,WACJ,IAAIC,EAAStB,EAAQc,UAAUO,OAAOhB,KAAKC,MAI3C,OAHAgB,EAAOlB,OAASE,KAAKF,OAAOiB,SAC5BC,EAAOX,MAAQL,KAAKK,MACpBW,EAAOC,WAAajB,KAAKG,OAAOe,KACzBF,GAEXG,SAAU,SAAUC,GAQhB,GAPA1B,EAAQc,UAAUW,SAASpB,KAAKC,KAAMoB,GACtCpB,KAAKG,OAASH,KAAKH,OAAOwB,aAAaD,EAAKH,iBACxBb,IAAhBJ,KAAKG,SACLH,KAAKG,OAASH,KAAKH,OAAOyB,OAE9BtB,KAAKK,MAAQe,EAAKf,MAClBL,KAAKF,OAASE,KAAKH,OAAOwB,aAAaD,EAAKtB,OAAOA,OAAOoB,WACtCd,IAAhBJ,KAAKF,OAAsB,CAC3B,IAAIyB,EAAS,IAAI5B,EAAM6B,aACvBxB,KAAKF,OAASyB,EAAOE,MAAML,EAAKtB,WAIrCF","file":"../../commands/RemoveObjectCommand.js","sourcesContent":["define([\n    '../Command',\n    '../skylark-threejs'\n], function (Command, THREE) {\n    'use strict';\n    var RemoveObjectCommand = function (editor, object) {\n        Command.call(this, editor);\n        this.type = 'RemoveObjectCommand';\n        this.name = 'Remove Object';\n        this.object = object;\n        this.parent = object !== undefined ? object.parent : undefined;\n        if (this.parent !== undefined) {\n            this.index = this.parent.children.indexOf(this.object);\n        }\n    };\n    RemoveObjectCommand.prototype = {\n        execute: function () {\n            this.editor.removeObject(this.object);\n            this.editor.deselect();\n        },\n        undo: function () {\n            this.editor.addObject(this.object, this.parent, this.index);\n            this.editor.select(this.object);\n        },\n        toJSON: function () {\n            var output = Command.prototype.toJSON.call(this);\n            output.object = this.object.toJSON();\n            output.index = this.index;\n            output.parentUuid = this.parent.uuid;\n            return output;\n        },\n        fromJSON: function (json) {\n            Command.prototype.fromJSON.call(this, json);\n            this.parent = this.editor.objectByUuid(json.parentUuid);\n            if (this.parent === undefined) {\n                this.parent = this.editor.scene;\n            }\n            this.index = json.index;\n            this.object = this.editor.objectByUuid(json.object.object.uuid);\n            if (this.object === undefined) {\n                var loader = new THREE.ObjectLoader();\n                this.object = loader.parse(json.object);\n            }\n        }\n    };\n    return RemoveObjectCommand;\n});"]}