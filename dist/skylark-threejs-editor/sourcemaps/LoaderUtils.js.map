{"version":3,"sources":["LoaderUtils.js"],"names":["define","createFilesMap","files","map","i","length","file","name","getFilesFromItemList","items","onDone","itemsCount","itemsTotal","filesMap","onEntryHandled","handleEntry","entry","isDirectory","createReader","readEntries","entries","isFile","push","fullPath","substr","webkitGetAsEntry"],"mappings":";;;;;;;AAAAA,OAAO,WACH,aA4CA,OA1CIC,eAAgB,SAAUC,GAEtB,IADA,IAAIC,KACKC,EAAI,EAAGA,EAAIF,EAAMG,OAAQD,IAAK,CACnC,IAAIE,EAAOJ,EAAME,GACjBD,EAAIG,EAAKC,MAAQD,EAErB,OAAOH,GAEXK,qBAAsB,SAAUC,EAAOC,GACnC,IAAIC,EAAa,EACbC,EAAa,EACbV,KACAW,KACJ,SAASC,MACLH,IACmBC,GACfF,EAAOR,EAAOW,GAGtB,SAASE,EAAYC,GACbA,EAAMC,YACOD,EAAME,eACZC,YAAY,SAAUC,GACzB,IAAK,IAAIhB,EAAI,EAAGA,EAAIgB,EAAQf,OAAQD,IAChCW,EAAYK,EAAQhB,IAExBU,MAEGE,EAAMK,QACbL,EAAMV,KAAK,SAAUA,GACjBJ,EAAMoB,KAAKhB,GACXO,EAASG,EAAMO,SAASC,OAAO,IAAMlB,EACrCQ,MAGRF,IAEJ,IAAK,IAAIR,EAAI,EAAGA,EAAIK,EAAMJ,OAAQD,IAC9BW,EAAYN,EAAML,GAAGqB","file":"../LoaderUtils.js","sourcesContent":["define(function () {\n    'use strict';\n    var LoaderUtils = {\n        createFilesMap: function (files) {\n            var map = {};\n            for (var i = 0; i < files.length; i++) {\n                var file = files[i];\n                map[file.name] = file;\n            }\n            return map;\n        },\n        getFilesFromItemList: function (items, onDone) {\n            var itemsCount = 0;\n            var itemsTotal = 0;\n            var files = [];\n            var filesMap = {};\n            function onEntryHandled() {\n                itemsCount++;\n                if (itemsCount === itemsTotal) {\n                    onDone(files, filesMap);\n                }\n            }\n            function handleEntry(entry) {\n                if (entry.isDirectory) {\n                    var reader = entry.createReader();\n                    reader.readEntries(function (entries) {\n                        for (var i = 0; i < entries.length; i++) {\n                            handleEntry(entries[i]);\n                        }\n                        onEntryHandled();\n                    });\n                } else if (entry.isFile) {\n                    entry.file(function (file) {\n                        files.push(file);\n                        filesMap[entry.fullPath.substr(1)] = file;\n                        onEntryHandled();\n                    });\n                }\n                itemsTotal++;\n            }\n            for (var i = 0; i < items.length; i++) {\n                handleEntry(items[i].webkitGetAsEntry());\n            }\n        }\n    };\n    return LoaderUtils;\n});"]}