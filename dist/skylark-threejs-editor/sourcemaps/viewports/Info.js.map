{"version":3,"sources":["viewports/Info.js"],"names":["define","mrdoobui","editor","signals","strings","container","UIPanel","setId","setPosition","setLeft","setBottom","setFontSize","setColor","objectsText","UIText","setMarginLeft","verticesText","trianglesText","frametimeText","update","scene","objects","vertices","triangles","i","l","children","length","traverseVisible","object","isMesh","geometry","isGeometry","faces","isBufferGeometry","attributes","position","count","index","setValue","format","add","getKey","setTextTransform","UIBreak","objectAdded","objectRemoved","geometryChanged","sceneRendered","frametime","Number","toFixed"],"mappings":";;;;;;;AAAAA,QAAQ,oBAAqB,SAAUC,GACnC,aA2DA,OA1DmB,SAAUC,GACzB,IAAIC,EAAUD,EAAOC,QACjBC,EAAUF,EAAOE,QACjBC,EAAY,IAAIJ,EAASK,QAC7BD,EAAUE,MAAM,QAChBF,EAAUG,YAAY,YACtBH,EAAUI,QAAQ,QAClBJ,EAAUK,UAAU,QACpBL,EAAUM,YAAY,QACtBN,EAAUO,SAAS,QACnB,IAAIC,EAAc,IAAIZ,EAASa,OAAO,KAAKC,cAAc,OACrDC,EAAe,IAAIf,EAASa,OAAO,KAAKC,cAAc,OACtDE,EAAgB,IAAIhB,EAASa,OAAO,KAAKC,cAAc,OACvDG,EAAgB,IAAIjB,EAASa,OAAO,KAAKC,cAAc,OAY3D,SAASI,IAGL,IAFA,IAAIC,EAAQlB,EAAOkB,MACfC,EAAU,EAAGC,EAAW,EAAGC,EAAY,EAClCC,EAAI,EAAGC,EAAIL,EAAMM,SAASC,OAAQH,EAAIC,EAAGD,IACjCJ,EAAMM,SAASF,GACrBI,gBAAgB,SAAUC,GAE7B,GADAR,IACIQ,EAAOC,OAAQ,CACf,IAAIC,EAAWF,EAAOE,SAClBA,EAASC,YACTV,GAAYS,EAAST,SAASK,OAC9BJ,GAAaQ,EAASE,MAAMN,QACrBI,EAASG,mBAChBZ,GAAYS,EAASI,WAAWC,SAASC,MAClB,OAAnBN,EAASO,MACTf,GAAaQ,EAASO,MAAMD,MAAQ,EAEpCd,GAAaQ,EAASI,WAAWC,SAASC,MAAQ,MAMtExB,EAAY0B,SAASlB,EAAQmB,UAC7BxB,EAAauB,SAASjB,EAASkB,UAC/BvB,EAAcsB,SAAShB,EAAUiB,UAMrC,OA1CAnC,EAAUoC,IAAI,IAAIxC,EAASa,OAAOV,EAAQsC,OAAO,0BAA0BC,iBAAiB,cAC5FtC,EAAUoC,IAAI5B,EAAa,IAAIZ,EAAS2C,SACxCvC,EAAUoC,IAAI,IAAIxC,EAASa,OAAOV,EAAQsC,OAAO,2BAA2BC,iBAAiB,cAC7FtC,EAAUoC,IAAIzB,EAAc,IAAIf,EAAS2C,SACzCvC,EAAUoC,IAAI,IAAIxC,EAASa,OAAOV,EAAQsC,OAAO,4BAA4BC,iBAAiB,cAC9FtC,EAAUoC,IAAIxB,EAAe,IAAIhB,EAAS2C,SAC1CvC,EAAUoC,IAAI,IAAIxC,EAASa,OAAOV,EAAQsC,OAAO,4BAA4BC,iBAAiB,cAC9FtC,EAAUoC,IAAIvB,EAAe,IAAIjB,EAAS2C,SAC1CzC,EAAQ0C,YAAYJ,IAAItB,GACxBhB,EAAQ2C,cAAcL,IAAItB,GAC1BhB,EAAQ4C,gBAAgBN,IAAItB,GA4B5BhB,EAAQ6C,cAAcP,IACtB,SAAyBQ,GACrB/B,EAAcqB,SAASW,OAAOD,GAAWE,QAAQ,GAAK,SAEnD9C","file":"../../viewports/Info.js","sourcesContent":["define(['skylark-mrdoobui'], function (mrdoobui) {\n    'use strict';\n    var ViewportInfo = function (editor) {\n        var signals = editor.signals;\n        var strings = editor.strings;\n        var container = new mrdoobui.UIPanel();\n        container.setId('info');\n        container.setPosition('absolute');\n        container.setLeft('10px');\n        container.setBottom('10px');\n        container.setFontSize('12px');\n        container.setColor('#fff');\n        var objectsText = new mrdoobui.UIText('0').setMarginLeft('6px');\n        var verticesText = new mrdoobui.UIText('0').setMarginLeft('6px');\n        var trianglesText = new mrdoobui.UIText('0').setMarginLeft('6px');\n        var frametimeText = new mrdoobui.UIText('0').setMarginLeft('6px');\n        container.add(new mrdoobui.UIText(strings.getKey('viewport/info/objects')).setTextTransform('lowercase'));\n        container.add(objectsText, new mrdoobui.UIBreak());\n        container.add(new mrdoobui.UIText(strings.getKey('viewport/info/vertices')).setTextTransform('lowercase'));\n        container.add(verticesText, new mrdoobui.UIBreak());\n        container.add(new mrdoobui.UIText(strings.getKey('viewport/info/triangles')).setTextTransform('lowercase'));\n        container.add(trianglesText, new mrdoobui.UIBreak());\n        container.add(new mrdoobui.UIText(strings.getKey('viewport/info/frametime')).setTextTransform('lowercase'));\n        container.add(frametimeText, new mrdoobui.UIBreak());\n        signals.objectAdded.add(update);\n        signals.objectRemoved.add(update);\n        signals.geometryChanged.add(update);\n        function update() {\n            var scene = editor.scene;\n            var objects = 0, vertices = 0, triangles = 0;\n            for (var i = 0, l = scene.children.length; i < l; i++) {\n                var object = scene.children[i];\n                object.traverseVisible(function (object) {\n                    objects++;\n                    if (object.isMesh) {\n                        var geometry = object.geometry;\n                        if (geometry.isGeometry) {\n                            vertices += geometry.vertices.length;\n                            triangles += geometry.faces.length;\n                        } else if (geometry.isBufferGeometry) {\n                            vertices += geometry.attributes.position.count;\n                            if (geometry.index !== null) {\n                                triangles += geometry.index.count / 3;\n                            } else {\n                                triangles += geometry.attributes.position.count / 3;\n                            }\n                        }\n                    }\n                });\n            }\n            objectsText.setValue(objects.format());\n            verticesText.setValue(vertices.format());\n            trianglesText.setValue(triangles.format());\n        }\n        signals.sceneRendered.add(updateFrametime);\n        function updateFrametime(frametime) {\n            frametimeText.setValue(Number(frametime).toFixed(2) + ' ms');\n        }\n        return container;\n    };\n    return ViewportInfo;\n});"]}