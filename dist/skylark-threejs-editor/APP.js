/**
 * skylark-threejs-editor - A version of threejs-editor that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-threejs-editor/
 * @license MIT
 */
define(["skylark-threejs"],function(e){return{Player:function(){var t=new e.WebGLRenderer({antialias:!0});t.setPixelRatio(window.devicePixelRatio),t.outputEncoding=e.sRGBEncoding;var n,o,i,r,s=new e.ObjectLoader,d=VRButton.createButton(t),u={},c=document.createElement("div");function a(e,t){for(var n=0,o=e.length;n<o;n++)e[n](t)}function m(){i=performance.now();try{a(u.update,{time:i,delta:i-r})}catch(e){console.error(e.message||e,e.stack||"")}t.render(o,n),r=i}function v(e){a(u.keydown,e)}function h(e){a(u.keyup,e)}function p(e){a(u.mousedown,e)}function f(e){a(u.mouseup,e)}function l(e){a(u.mousemove,e)}function w(e){a(u.touchstart,e)}function E(e){a(u.touchend,e)}function L(e){a(u.touchmove,e)}c.appendChild(t.domElement),this.dom=c,this.width=500,this.height=500,this.load=function(e){var i=e.project;t.shadowMap.enabled=!0===i.shadows,t.xr.enabled=!0===i.vr,this.setScene(s.parse(e.scene)),this.setCamera(s.parse(e.camera)),u={init:[],start:[],stop:[],keydown:[],keyup:[],mousedown:[],mouseup:[],mousemove:[],touchstart:[],touchend:[],touchmove:[],update:[]};var r="player,renderer,scene,camera",d={};for(var c in u)r+=","+c,d[c]=c;var m=JSON.stringify(d).replace(/\"/g,"");for(var v in e.scripts){var h=o.getObjectByProperty("uuid",v,!0);if(void 0!==h)for(var p=e.scripts[v],f=0;f<p.length;f++){var l=p[f],w=new Function(r,l.source+"\nreturn "+m+";").bind(h)(this,t,o,n);for(var E in w)void 0!==w[E]&&(void 0!==u[E]?u[E].push(w[E].bind(h)):console.warn("APP.Player: Event type not supported (",E,")"))}else console.warn("APP.Player: Script without object.",v)}a(u.init,arguments)},this.setCamera=function(e){(n=e).aspect=this.width/this.height,n.updateProjectionMatrix()},this.setScene=function(e){o=e},this.setSize=function(e,o){this.width=e,this.height=o,n&&(n.aspect=this.width/this.height,n.updateProjectionMatrix()),t&&t.setSize(e,o)},this.play=function(){t.xr.enabled&&c.append(d),r=performance.now(),document.addEventListener("keydown",v),document.addEventListener("keyup",h),document.addEventListener("mousedown",p),document.addEventListener("mouseup",f),document.addEventListener("mousemove",l),document.addEventListener("touchstart",w),document.addEventListener("touchend",E),document.addEventListener("touchmove",L),a(u.start,arguments),t.setAnimationLoop(m)},this.stop=function(){t.xr.enabled&&d.remove(),document.removeEventListener("keydown",v),document.removeEventListener("keyup",h),document.removeEventListener("mousedown",p),document.removeEventListener("mouseup",f),document.removeEventListener("mousemove",l),document.removeEventListener("touchstart",w),document.removeEventListener("touchend",E),document.removeEventListener("touchmove",L),a(u.stop,arguments),t.setAnimationLoop(null)},this.dispose=function(){t.dispose(),n=void 0,o=void 0}}}});
//# sourceMappingURL=sourcemaps/APP.js.map
