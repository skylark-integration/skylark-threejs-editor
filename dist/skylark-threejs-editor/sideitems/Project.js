/**
 * skylark-threejs-editor - A version of threejs-editor that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-threejs-editor/
 * @license MIT
 */
define(["skylark-threejs","skylark-mrdoobui","../ThreeUI","../commands/SetMaterialCommand"],function(e,t,a,n){"use strict";return{SidebarProject:function(r){var d=r.config,o=r.signals,i=r.strings,s=null,p=null,l=new t.UISpan,c=new t.UIPanel;c.setBorderTop("0"),c.setPaddingTop("20px"),l.add(c);var g=new t.UIRow,h=new t.UIInput(d.getKey("project/title")).setLeft("100px").onChange(function(){d.setKey("project/title",this.getValue())});g.add(new t.UIText(i.getKey("sidebar/project/title")).setWidth("90px")),g.add(h),c.add(g);var w=new t.UIRow,u=new t.UICheckbox(d.getKey("project/editable")).setLeft("100px").onChange(function(){d.setKey("project/editable",this.getValue())});w.add(new t.UIText(i.getKey("sidebar/project/editable")).setWidth("90px")),w.add(u),c.add(w);var y=new t.UIRow,I=new t.UICheckbox(d.getKey("project/vr")).setLeft("100px").onChange(function(){d.setKey("project/vr",this.getValue())});y.add(new t.UIText(i.getKey("sidebar/project/vr")).setWidth("90px")),y.add(I),c.add(y);var U=new t.UIPanel;l.add(U),(B=new t.UIRow).add(new t.UIText(i.getKey("sidebar/project/renderer").toUpperCase())),U.add(B);var j=new t.UIRow,x=new a.UIBoolean(d.getKey("project/renderer/antialias")).onChange(function(){d.setKey("project/renderer/antialias",this.getValue()),L()});j.add(new t.UIText(i.getKey("sidebar/project/antialias")).setWidth("90px")),j.add(x),U.add(j);var K=new t.UIRow,b=new a.UIBoolean(d.getKey("project/renderer/shadows")).onChange(function(){d.setKey("project/renderer/shadows",this.getValue()),L()});K.add(new t.UIText(i.getKey("sidebar/project/shadows")).setWidth("90px")),K.add(b),U.add(K);var v=new t.UIRow,f=(new t.UISelect).setOptions({0:"Basic",1:"PCF",2:"PCF (Soft)"}).setWidth("150px").onChange(function(){d.setKey("project/renderer/shadowType",parseFloat(this.getValue())),L()});f.setValue(d.getKey("project/renderer/shadowType")),v.add(new t.UIText(i.getKey("sidebar/project/shadowType")).setWidth("90px")),v.add(f),U.add(v);var C=new t.UIRow,M=new a.UIBoolean(d.getKey("project/renderer/physicallyCorrectLights")).onChange(function(){d.setKey("project/renderer/physicallyCorrectLights",this.getValue()),L()});C.add(new t.UIText(i.getKey("sidebar/project/physicallyCorrectLights")).setWidth("90px")),C.add(M),U.add(C);var m=new t.UIRow,V=(new t.UISelect).setOptions({0:"None",1:"Linear",2:"Reinhard",3:"Uncharted2",4:"Cineon",5:"ACESFilmic"}).setWidth("150px").onChange(function(){var e=parseFloat(this.getValue());d.setKey("project/renderer/toneMapping",e),L(),W.setDisplay(3===e?"block":"none")});V.setValue(d.getKey("project/renderer/toneMapping")),m.add(new t.UIText(i.getKey("sidebar/project/toneMapping")).setWidth("90px")),m.add(V),U.add(m);var R=new t.UIRow,T=new t.UINumber(d.getKey("project/renderer/toneMappingExposure")).setRange(0,10).onChange(function(){d.setKey("project/renderer/toneMappingExposure",this.getValue()),k()});R.add(new t.UIText(i.getKey("sidebar/project/toneMappingExposure")).setWidth("90px")),R.add(T),U.add(R);var W=new t.UIRow,P=new t.UINumber(d.getKey("project/renderer/toneMappingWhitePoint")).setRange(0,10).onChange(function(){d.setKey("project/renderer/toneMappingWhitePoint",this.getValue()),k()});function L(){S(x.getValue(),b.getValue(),f.getValue(),V.getValue(),M.getValue())}function S(t,a,n,r,d){var i={antialias:t};null!==s&&(s.dispose(),p.dispose()),s=new e.WebGLRenderer(i),(p=new e.PMREMGenerator(s)).compileCubemapShader(),p.compileEquirectangularShader(),a&&(s.shadowMap.enabled=!0,s.shadowMap.type=parseFloat(n)),s.toneMapping=parseFloat(r),s.physicallyCorrectLights=d,o.rendererChanged.dispatch(s,p)}function k(){s.toneMappingExposure=T.getValue(),s.toneMappingWhitePoint=P.getValue(),o.rendererUpdated.dispatch()}W.add(new t.UIText(i.getKey("sidebar/project/toneMappingWhitePoint")).setWidth("90px")),W.add(P),U.add(W),W.setDisplay(3===d.getKey("project/renderer/toneMapping")?"block":"none"),S(d.getKey("project/renderer/antialias"),d.getKey("project/renderer/shadows"),d.getKey("project/renderer/shadowType"),d.getKey("project/renderer/toneMapping"),d.getKey("project/renderer/physicallyCorrectLights"));var B,E=new t.UIPanel;(B=new t.UIRow).add(new t.UIText(i.getKey("sidebar/project/materials").toUpperCase())),E.add(B);var F=new t.UIListbox;E.add(F);var O=new t.UIRow;O.setPadding("10px 0px"),E.add(O);var A=(new t.UIButton).setLabel(i.getKey("sidebar/project/Assign")).setMargin("0px 5px");function N(){F.setItems(Object.values(r.materials))}return A.onClick(function(){var e=r.selected;if(null!==e){var t=e.material;if(void 0!==t){var a=r.getMaterialById(parseInt(F.getValue()));void 0!==a&&(r.removeMaterial(t),r.execute(new n(r,e,a)),r.addMaterial(a))}}}),O.add(A),l.add(E),o.objectSelected.add(function(e){if(null!==e){var t=Object.values(r.materials).indexOf(e.material);F.selectIndex(t)}}),o.materialAdded.add(N),o.materialChanged.add(N),o.materialRemoved.add(N),l}}});
//# sourceMappingURL=../sourcemaps/sideitems/Project.js.map
