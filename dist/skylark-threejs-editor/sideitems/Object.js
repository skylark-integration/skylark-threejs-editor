/**
 * skylark-threejs-editor - A version of threejs-editor that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-threejs-editor/
 * @license MIT
 */
define(["skylark-threejs","skylark-mrdoobui","../ThreeUI","../commands/SetUuidCommand","../commands/SetValueCommand","../commands/SetPositionCommand","../commands/SetRotationCommand","../commands/SetScaleCommand","../commands/SetColorCommand"],function(e,t,a,d,n,o,s,i,r){"use strict";return{SidebarObject:function(u){var l=u.strings,c=u.signals,g=new t.UIPanel;g.setBorderTop("0"),g.setPaddingTop("20px"),g.setDisplay("none");var w=new t.UIRow,h=new t.UIText;w.add(new t.UIText(l.getKey("sidebar/object/type")).setWidth("90px")),w.add(h),g.add(w);var b=new t.UIRow,x=(new t.UIInput).setWidth("102px").setFontSize("12px").setDisabled(!0),V=new t.UIButton(l.getKey("sidebar/object/new")).setMarginLeft("7px").onClick(function(){x.setValue(e.MathUtils.generateUUID()),u.execute(new d(u,u.selected,x.getValue()))});b.add(new t.UIText(l.getKey("sidebar/object/uuid")).setWidth("90px")),b.add(x),b.add(V),g.add(b);var U=new t.UIRow,v=(new t.UIInput).setWidth("150px").setFontSize("12px").onChange(function(){u.execute(new n(u,u.selected,"name",v.getValue()))});U.add(new t.UIText(l.getKey("sidebar/object/name")).setWidth("90px")),U.add(v),g.add(U);var p=new t.UIRow,I=(new t.UINumber).setPrecision(3).setWidth("50px").onChange(ve),m=(new t.UINumber).setPrecision(3).setWidth("50px").onChange(ve),y=(new t.UINumber).setPrecision(3).setWidth("50px").onChange(ve);p.add(new t.UIText(l.getKey("sidebar/object/position")).setWidth("90px")),p.add(I,m,y),g.add(p);var C=new t.UIRow,f=(new t.UINumber).setStep(10).setNudge(.1).setUnit("°").setWidth("50px").onChange(ve),j=(new t.UINumber).setStep(10).setNudge(.1).setUnit("°").setWidth("50px").onChange(ve),R=(new t.UINumber).setStep(10).setNudge(.1).setUnit("°").setWidth("50px").onChange(ve);C.add(new t.UIText(l.getKey("sidebar/object/rotation")).setWidth("90px")),C.add(f,j,R),g.add(C);var W=new t.UIRow,S=new t.UICheckbox(!0).setPosition("absolute").setLeft("75px"),T=new t.UINumber(1).setPrecision(3).setRange(.001,1/0).setWidth("50px").onChange(function(){var e=u.selected;if(!0===S.getValue()){var t=T.getValue()/e.scale.x;N.setValue(N.getValue()*t),K.setValue(K.getValue()*t)}ve()}),N=new t.UINumber(1).setPrecision(3).setRange(.001,1/0).setWidth("50px").onChange(function(){var e=u.selected;if(!0===S.getValue()){var t=N.getValue()/e.scale.y;T.setValue(T.getValue()*t),K.setValue(K.getValue()*t)}ve()}),K=new t.UINumber(1).setPrecision(3).setRange(.001,1/0).setWidth("50px").onChange(function(){var e=u.selected;if(!0===S.getValue()){var t=K.getValue()/e.scale.z;T.setValue(T.getValue()*t),N.setValue(N.getValue()*t)}ve()});W.add(new t.UIText(l.getKey("sidebar/object/scale")).setWidth("90px")),W.add(S),W.add(T,N,K),g.add(W);var D=new t.UIRow,M=(new t.UINumber).onChange(ve);D.add(new t.UIText(l.getKey("sidebar/object/fov")).setWidth("90px")),D.add(M),g.add(D);var P=new t.UIRow,O=(new t.UINumber).onChange(ve);P.add(new t.UIText(l.getKey("sidebar/object/left")).setWidth("90px")),P.add(O),g.add(P);var H=new t.UIRow,k=(new t.UINumber).onChange(ve);H.add(new t.UIText(l.getKey("sidebar/object/right")).setWidth("90px")),H.add(k),g.add(H);var z=new t.UIRow,A=(new t.UINumber).onChange(ve);z.add(new t.UIText(l.getKey("sidebar/object/top")).setWidth("90px")),z.add(A),g.add(z);var E=new t.UIRow,L=(new t.UINumber).onChange(ve);E.add(new t.UIText(l.getKey("sidebar/object/bottom")).setWidth("90px")),E.add(L),g.add(E);var B=new t.UIRow,G=(new t.UINumber).onChange(ve);B.add(new t.UIText(l.getKey("sidebar/object/near")).setWidth("90px")),B.add(G),g.add(B);var J=new t.UIRow,F=(new t.UINumber).onChange(ve);J.add(new t.UIText(l.getKey("sidebar/object/far")).setWidth("90px")),J.add(F),g.add(J);var q=new t.UIRow,Q=(new t.UINumber).setRange(0,1/0).onChange(ve);q.add(new t.UIText(l.getKey("sidebar/object/intensity")).setWidth("90px")),q.add(Q),g.add(q);var X=new t.UIRow,Y=(new t.UIColor).onChange(ve);X.add(new t.UIText(l.getKey("sidebar/object/color")).setWidth("90px")),X.add(Y),g.add(X);var Z=new t.UIRow,$=(new t.UIColor).onChange(ve);Z.add(new t.UIText(l.getKey("sidebar/object/groundcolor")).setWidth("90px")),Z.add($),g.add(Z);var _=new t.UIRow,ee=(new t.UINumber).setRange(0,1/0).onChange(ve);_.add(new t.UIText(l.getKey("sidebar/object/distance")).setWidth("90px")),_.add(ee),g.add(_);var te=new t.UIRow,ae=(new t.UINumber).setPrecision(3).setRange(0,Math.PI/2).onChange(ve);te.add(new t.UIText(l.getKey("sidebar/object/angle")).setWidth("90px")),te.add(ae),g.add(te);var de=new t.UIRow,ne=(new t.UINumber).setRange(0,1).onChange(ve);de.add(new t.UIText(l.getKey("sidebar/object/penumbra")).setWidth("90px")),de.add(ne),g.add(de);var oe=new t.UIRow,se=(new t.UINumber).setRange(0,1/0).onChange(ve);oe.add(new t.UIText(l.getKey("sidebar/object/decay")).setWidth("90px")),oe.add(se),g.add(oe);var ie=new t.UIRow;ie.add(new t.UIText(l.getKey("sidebar/object/shadow")).setWidth("90px"));var re=new a.UIBoolean(!1,l.getKey("sidebar/object/cast")).onChange(ve);ie.add(re);var ue=new a.UIBoolean(!1,l.getKey("sidebar/object/receive")).onChange(ve);ie.add(ue);var le=new t.UINumber(1).onChange(ve);ie.add(le),g.add(ie);var ce=new t.UIRow,ge=(new t.UICheckbox).onChange(ve);ce.add(new t.UIText(l.getKey("sidebar/object/visible")).setWidth("90px")),ce.add(ge),g.add(ce);var we=new t.UIRow,he=(new t.UICheckbox).onChange(ve);we.add(new t.UIText(l.getKey("sidebar/object/frustumcull")).setWidth("90px")),we.add(he),g.add(we);var be=new t.UIRow,xe=(new t.UIInteger).setWidth("50px").onChange(ve);be.add(new t.UIText(l.getKey("sidebar/object/renderorder")).setWidth("90px")),be.add(xe),g.add(be);var Ve=new t.UIRow,Ue=(new t.UITextArea).setWidth("150px").setHeight("40px").setFontSize("12px").onChange(ve);function ve(){var t=u.selected;if(null!==t){var a=new e.Vector3(I.getValue(),m.getValue(),y.getValue());t.position.distanceTo(a)>=.01&&u.execute(new o(u,t,a));var d=new e.Euler(f.getValue()*e.MathUtils.DEG2RAD,j.getValue()*e.MathUtils.DEG2RAD,R.getValue()*e.MathUtils.DEG2RAD);t.rotation.toVector3().distanceTo(d.toVector3())>=.01&&u.execute(new s(u,t,d));var l=new e.Vector3(T.getValue(),N.getValue(),K.getValue());t.scale.distanceTo(l)>=.01&&u.execute(new i(u,t,l)),void 0!==t.fov&&Math.abs(t.fov-M.getValue())>=.01&&(u.execute(new n(u,t,"fov",M.getValue())),t.updateProjectionMatrix()),void 0!==t.left&&Math.abs(t.left-O.getValue())>=.01&&(u.execute(new n(u,t,"left",O.getValue())),t.updateProjectionMatrix()),void 0!==t.right&&Math.abs(t.right-k.getValue())>=.01&&(u.execute(new n(u,t,"right",k.getValue())),t.updateProjectionMatrix()),void 0!==t.top&&Math.abs(t.top-A.getValue())>=.01&&(u.execute(new n(u,t,"top",A.getValue())),t.updateProjectionMatrix()),void 0!==t.bottom&&Math.abs(t.bottom-L.getValue())>=.01&&(u.execute(new n(u,t,"bottom",L.getValue())),t.updateProjectionMatrix()),void 0!==t.near&&Math.abs(t.near-G.getValue())>=.01&&(u.execute(new n(u,t,"near",G.getValue())),t.isOrthographicCamera&&t.updateProjectionMatrix()),void 0!==t.far&&Math.abs(t.far-F.getValue())>=.01&&(u.execute(new n(u,t,"far",F.getValue())),t.isOrthographicCamera&&t.updateProjectionMatrix()),void 0!==t.intensity&&Math.abs(t.intensity-Q.getValue())>=.01&&u.execute(new n(u,t,"intensity",Q.getValue())),void 0!==t.color&&t.color.getHex()!==Y.getHexValue()&&u.execute(new r(u,t,"color",Y.getHexValue())),void 0!==t.groundColor&&t.groundColor.getHex()!==$.getHexValue()&&u.execute(new r(u,t,"groundColor",$.getHexValue())),void 0!==t.distance&&Math.abs(t.distance-ee.getValue())>=.01&&u.execute(new n(u,t,"distance",ee.getValue())),void 0!==t.angle&&Math.abs(t.angle-ae.getValue())>=.01&&u.execute(new n(u,t,"angle",ae.getValue())),void 0!==t.penumbra&&Math.abs(t.penumbra-ne.getValue())>=.01&&u.execute(new n(u,t,"penumbra",ne.getValue())),void 0!==t.decay&&Math.abs(t.decay-se.getValue())>=.01&&u.execute(new n(u,t,"decay",se.getValue())),t.visible!==ge.getValue()&&u.execute(new n(u,t,"visible",ge.getValue())),t.frustumCulled!==he.getValue()&&u.execute(new n(u,t,"frustumCulled",he.getValue())),t.renderOrder!==xe.getValue()&&u.execute(new n(u,t,"renderOrder",xe.getValue())),void 0!==t.castShadow&&t.castShadow!==re.getValue()&&u.execute(new n(u,t,"castShadow",re.getValue())),void 0!==t.receiveShadow&&t.receiveShadow!==ue.getValue()&&(void 0!==t.material&&(t.material.needsUpdate=!0),u.execute(new n(u,t,"receiveShadow",ue.getValue()))),void 0!==t.shadow&&t.shadow.radius!==le.getValue()&&u.execute(new n(u,t.shadow,"radius",le.getValue()));try{var c=JSON.parse(Ue.getValue());JSON.stringify(t.userData)!=JSON.stringify(c)&&u.execute(new n(u,t,"userData",c))}catch(e){console.warn(e)}}}function pe(t){h.setValue(t.type),x.setValue(t.uuid),v.setValue(t.name),I.setValue(t.position.x),m.setValue(t.position.y),y.setValue(t.position.z),f.setValue(t.rotation.x*e.MathUtils.RAD2DEG),j.setValue(t.rotation.y*e.MathUtils.RAD2DEG),R.setValue(t.rotation.z*e.MathUtils.RAD2DEG),T.setValue(t.scale.x),N.setValue(t.scale.y),K.setValue(t.scale.z),void 0!==t.fov&&M.setValue(t.fov),void 0!==t.left&&O.setValue(t.left),void 0!==t.right&&k.setValue(t.right),void 0!==t.top&&A.setValue(t.top),void 0!==t.bottom&&L.setValue(t.bottom),void 0!==t.near&&G.setValue(t.near),void 0!==t.far&&F.setValue(t.far),void 0!==t.intensity&&Q.setValue(t.intensity),void 0!==t.color&&Y.setHexValue(t.color.getHexString()),void 0!==t.groundColor&&$.setHexValue(t.groundColor.getHexString()),void 0!==t.distance&&ee.setValue(t.distance),void 0!==t.angle&&ae.setValue(t.angle),void 0!==t.penumbra&&ne.setValue(t.penumbra),void 0!==t.decay&&se.setValue(t.decay),void 0!==t.castShadow&&re.setValue(t.castShadow),void 0!==t.receiveShadow&&ue.setValue(t.receiveShadow),void 0!==t.shadow&&le.setValue(t.shadow.radius),ge.setValue(t.visible),he.setValue(t.frustumCulled),xe.setValue(t.renderOrder);try{Ue.setValue(JSON.stringify(t.userData,null,"  "))}catch(e){console.log(e)}Ue.setBorderColor("transparent"),Ue.setBackgroundColor(""),function(e){e.isLight||e.isObject3D&&e.userData.targetInverse?(C.setDisplay("none"),W.setDisplay("none")):(C.setDisplay(""),W.setDisplay(""))}(t)}return Ue.onKeyUp(function(){try{JSON.parse(Ue.getValue()),Ue.dom.classList.add("success"),Ue.dom.classList.remove("fail")}catch(e){Ue.dom.classList.remove("success"),Ue.dom.classList.add("fail")}}),Ve.add(new t.UIText(l.getKey("sidebar/object/userdata")).setWidth("90px")),Ve.add(Ue),g.add(Ve),c.objectSelected.add(function(e){null!==e?(g.setDisplay("block"),function(e){var t={fov:D,left:P,right:H,top:z,bottom:E,near:B,far:J,intensity:q,color:X,groundColor:Z,distance:_,angle:te,penumbra:de,decay:oe,castShadow:ie,receiveShadow:ue,shadow:le};for(var a in t)t[a].setDisplay(void 0!==e[a]?"":"none")}(e),pe(e)):g.setDisplay("none")}),c.objectChanged.add(function(e){e===u.selected&&pe(e)}),c.refreshSidebarObject3D.add(function(e){e===u.selected&&pe(e)}),g}}});
//# sourceMappingURL=../sourcemaps/sideitems/Object.js.map
